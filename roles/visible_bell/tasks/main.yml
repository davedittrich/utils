---
# tasks file for davedittrich.utils.visible_bell

# This role implements settings described in the following page:
# https://tldp.org/HOWTO/Visual-Bell-8.html

- name: Ensure package cache is up to date.
  ansible.builtin.package:
    update_cache: yes
    cache_valid_time: 3600
  become: true

- name: Ensure applications using ``readline`` are quieted.
  ansible.builtin.blockinfile:
    path: "{{ ansible_env.HOME ~ '/.inputrc' }}"
    marker: "# {mark} ANSIBLE MANAGED BLOCK"
    block: |
      set prefer-visible-bell
    create: true

- name: Ensure ``bash`` shell sessions are quieted.
  ansible.builtin.blockinfile:
    path: "{{ ansible_env.HOME ~ '/.bashrc' }}"
    marker: "# {mark} ANSIBLE MANAGED BLOCK"
    block: |
      set bellstyle visible
    create: true

- name: Ensure ``csh`` and ``tcsh`` shell sessions are quieted.
  ansible.builtin.blockinfile:
    path: "{{ ansible_env.HOME ~ '/.cshrc' }}"
    marker: "# {mark} ANSIBLE MANAGED BLOCK"
    block: |
      set visiblebell
    create: true

- name: Ensure ``ex`` family editors are quieted.
  ansible.builtin.blockinfile:
    path: "{{ ansible_env.HOME ~ '/.exrc' }}"
    marker: '" {mark} ANSIBLE MANAGED BLOCK'
    block: |
      set flash
    create: true

- name: Ensure ``vim`` style editors are quieted.
  ansible.builtin.blockinfile:
    path: "{{ ansible_env.HOME ~ '/.vimrc' }}"
    marker: '" {mark} ANSIBLE MANAGED BLOCK'
    block: |
      set vb t_vb=
    create: true
